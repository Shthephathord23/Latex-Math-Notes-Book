% Preamble/Commands/BinaryRelations.tex

\NewDocumentCommand{\Domain}{m}
{
    \mathcal{D} \left( {#1} \right)
}

\NewDocumentCommand{\Range}{m}
{
    \mathcal{R} \left( {#1} \right)
}

\NewDocumentCommand{\Codomain}{m}
{
    \mathcal{R} \left( {#1} \right)
}

\NewDocumentCommand{\Corange}{m}
{
    \mathcal{D} \left( {#1} \right)
}

\NewDocumentCommand{\ConverseRel}{tp m}
{
    \IfBooleanTF{#1}
    {
        \left( {#2} \right)^T
    }
    {
        {#2}^T
    }
}

\NewDocumentCommand{\ComplementRel}{tp m}
{
    \IfBooleanTF{#1}
    {
        \left( {#2} \right)^c
    }
    {
        {#2}^c
    }
}

\NewDocumentCommand{\Inverse}{m}
{
    {#1}^{-1}
}

\NewDocumentCommand{\DirectImage}{tp m m}
{
    \IfBooleanTF{#1}
    {
        \left( {#2} \right) \left[ {#3} \right]
    }
    {
        {#2} \left[ {#3} \right]
    }
}

\NewDocumentCommand{\InverseImage}{tp m m}
{
    \IfBooleanTF{#1}
    {
        \left( \ConverseRel{#2} \right) \left[ {#3} \right]
    }
    {
        \ConverseRel{#2} \left[ {#3} \right]
    }
}

\NewDocumentCommand{\Composition}{tp tp m m}
{
    \IfBooleanTF{#1}
    {
        \left( {#3} \circ {#4} \right)
    }
    {
        {#3} \circ {#4}
    }
}

\NewDocumentCommand{\Restriction}{m o o}
{
    \IfValueTF{#2}
    {   
        \IfValueTF{#3}
        {
            {#1} \rvert _{#2}^{#3}
        }
        {
            {#1} \rvert _{#2}
        }
    }
    {   
        \IfValueTF{#3}
        {
            {#1} \rvert ^{#3}
        }
        {
            {#1} \rvert
        }
    }
}

\NewDocumentCommand{\UniversalRel}{m o}
{
    \IfValueTF{#2}
    {
        \nabla_{#1, #2}
    }
    {
        \nabla_{#1}
    }
}